---
title: "SANCHEZ_SIMBANA_PRAC2"
author: "SANCHEZ_SIMBANA"
date: "28/12/2019"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
#Carga y/o instalación de Paquetes si son necesarios
if (!require("ggplot2")) install.packages("ggplot2")
if (!require("dplyr")) install.packages("dplyr")
if (!require("utils")) install.packages("utils")
if (!require("RColorBrewer")) install.packages("RColorBrewer")
if (!require("colourpicker")) install.packages("colourpicker")
if (!require("colorspace")) install.packages("ccolorspace")

```


```{r}
#Carga de Datos desde el directorio actual del archivo MarkDown
test <- read.csv('./titanic-test.csv',stringsAsFactors = FALSE)
train <- read.csv('./titanic-train.csv', stringsAsFactors = FALSE)

```

```{r}
# Unimos los dos conjuntos de datos en uno solo, llamandolo Titanic
titanic <- bind_rows(train,test)
filas=dim(train)[1]
View(titanic)
#Vista de la estructura básica de Titanic
str(titanic)
summary(titanic)
## R Markdown
```
# 3.1. ¿Los datos contienen ceros o elementos vacíos? ¿Cómo gestionarías cada uno de estos casos?
```{r}
# Estadísticas de valores vacíos
colSums(is.na(titanic))
cat("Por ejemplo en la columna Survived existen 418 vacios, en Age 263 vacios, en Fare 1 vacio ")
colSums(titanic=="")
cat("Por ejemplo en la columna Cabin existen 1014 espacio en <blanco>, no obstante en Survived y fare, la condición no aplica porque son datos numéricos y no de texto")
    
# Tomamos valor "C" para los valores vacíos de la variable "Embarked"
titanic$Embarked[titanic$Embarked==""]="C" 
cat("Como ejemplo de gestión, la columna Embarked tiene tres valores posibles C = Cherbourg; Q = Queenstown; S = Southampton. La historia del titanic cuenta que el último puerto dónde se embarcaron pasajeros Cherbourg, por tanto hemos asumido que si algún pasajero no tiene registro de puerto de embarque, lo marcaremos o llenaremos como <C>")
# Tomamos la media para valores vacíos de la variable "Age"
View(titanic)
titanic$Age[is.na(titanic$Age)] <- mean(titanic$Age)
cat("Como otro ejemplo de gestión, en la columna Age, a las filas vacías se le asigna el promedio de la edades de los pasajeros registrados en el dataset")
View(titanic)
```
3.2. Identificación y tratamiento de valores extremos que no estén vacíos, para los atributos numéricos: Age, SibSp, Parch y Fare. No se hará tal análisis al atribito PClass porque es o deber ser categórico. No se hará tal análisis al atribito Survived porque es o deber ser categórico <0=No sobrevive, 1=Sobrevive>

```{r}
cat("\nMáximo de edad - Age: ", max(titanic$Age, na.rm=TRUE))
cat("\nMínimo de edad - Age: ", min(titanic$Age, na.rm=TRUE))
cat("\nPromedio de edad - Age: ", mean(titanic$Age, na.rm=TRUE))
cat("\nDesviación estándar de edad - Age: ", sd(titanic$Age, na.rm=TRUE))

cat("\nMáximo número de hermanos / cónyuges a bordo: ", max(titanic$SibSp, na.rm=TRUE))
cat("\nMínimo número de hermanos / cónyuges a bordo: ", min(titanic$SibSp, na.rm=TRUE))
cat("\nPromedio número de hermanos / cónyuges a bordo: ", mean(titanic$SibSp, na.rm=TRUE))
cat("\nDesviación estándar número de hermanos / cónyuges a bordo: ", sd(titanic$SibSp, na.rm=TRUE))

cat("\nMáximo Número de padres / hijos a bordo: ", max(titanic$Parch, na.rm=TRUE))
cat("\nMínimo Número de padres / hijos a bordo: ", min(titanic$Parch, na.rm=TRUE))
cat("\nPromedio Número de padres / hijos a bordo: ", mean(titanic$Parch, na.rm=TRUE))
cat("\nDesviación estándar Número de padres / hijos a bordo: ", sd(titanic$Parch, na.rm=TRUE))

cat("\nMáximo de tarifa: ", max(titanic$Fare, na.rm=TRUE))
cat("\nMínimo de tarifa: ", min(titanic$Fare, na.rm=TRUE))
cat("\nPromedio de tarifa", mean(titanic$Fare, na.rm=TRUE))
cat("\nDesviación estándar de tarifa: ", sd(titanic$Fare, na.rm=TRUE))






```
4. Análisis de los datos.
Nos proponemos analizar las relaciones entre las diferentes variables del
juego de datos
```{r}
# Visualizamos la relación entre las variables "sex" y "survival":
ggplot(data=titanic[1:filas,],aes(x=Sex,fill=Survived))+geom_bar()
```
```{r}
# Otro punto de vista. Survival como función de Embarked:
ggplot(data =
titanic[1:filas,],aes(x=Embarked,fill=Survived))+geom_bar(position="fill")+ylab("Frecuencia")
```
Obtenemos una matriz de porcentajes de frecuencia.
Vemos, por ejemplo, que la probabilidad de sobrevivir si se embarcó en
“C” es de un 55%.
```{r}
t<-table(titanic[1:filas,]$Embarked,titanic[1:filas,]$Survived)
for (i in 1:dim(t)[1]){
 t[i,]<-t[i,]/sum(t[i,])*100
}
t

```
Vemos ahora como en un mismo gráfico de frecuencias podemos trabajar
con 3 variables: Embarked, Survived y Pclass.
```{r}
# Now, let's devide the graph of Embarked by Pclass:
ggplot(data =
titanic[1:filas,],aes(x=Embarked,fill=Survived))+geom_bar(position="fill")+facet_wrap(~Pclass)
```
Comparemos ahora dos gráficos de frecuencias. Survived-Sibsp y
Survived-Parch
```{r}
# Survivial como función de SibSp y Parch
ggplot(data = titanic[1:filas,],aes(x=SibSp,fill=Survived))+geom_bar()
```
```{r}
ggplot(data = titanic[1:filas,],aes(x=Parch,fill=Survived))+geom_bar()

```
Vemos como la forma de estos dos gráficos es similar. Esto nos puede indicar la
presencia de correlaciones altas.




```

```
## R Markdown
This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
